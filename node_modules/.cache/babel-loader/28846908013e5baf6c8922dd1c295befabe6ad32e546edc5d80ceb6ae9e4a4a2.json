{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n  var getDomain = Promise._getDomain;\n  var util = require(\"./util\");\n  var tryCatch = util.tryCatch;\n  function ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n      initialValue = Promise.resolve(initialValue);\n      initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if (_each === INTERNAL) {\n      this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n      this._eachValues = null;\n    } else {\n      this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n  }\n  util.inherits(ReductionPromiseArray, PromiseArray);\n  ReductionPromiseArray.prototype._gotAccum = function (accum) {\n    if (this._eachValues !== undefined && this._eachValues !== null && accum !== INTERNAL) {\n      this._eachValues.push(accum);\n    }\n  };\n  ReductionPromiseArray.prototype._eachComplete = function (value) {\n    if (this._eachValues !== null) {\n      this._eachValues.push(value);\n    }\n    return this._eachValues;\n  };\n  ReductionPromiseArray.prototype._init = function () {};\n  ReductionPromiseArray.prototype._resolveEmptyArray = function () {\n    this._resolve(this._eachValues !== undefined ? this._eachValues : this._initialValue);\n  };\n  ReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n  };\n  ReductionPromiseArray.prototype._resolve = function (value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n  };\n  ReductionPromiseArray.prototype._resultCancelled = function (sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n      this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n      this._initialValue.cancel();\n    }\n  };\n  ReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n      value = this._initialValue;\n      i = 0;\n    } else {\n      value = Promise.resolve(values[0]);\n      i = 1;\n    }\n    this._currentCancellable = value;\n    if (!value.isRejected()) {\n      for (; i < length; ++i) {\n        var ctx = {\n          accum: null,\n          value: values[i],\n          index: i,\n          length: length,\n          array: this\n        };\n        value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n      }\n    }\n    if (this._eachValues !== undefined) {\n      value = value._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n  };\n  Promise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n  };\n  Promise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n  };\n  function completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n      array._resolve(valueOrReason);\n    } else {\n      array._reject(valueOrReason);\n    }\n  }\n  function reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n      return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n  }\n  function gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n      this.array._currentCancellable = value;\n      return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n      return gotValue.call(this, value);\n    }\n  }\n  function gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n      ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n      ret = fn.call(promise._boundValue(), this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n      array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(ret, promiseCreated, array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\", promise);\n    return ret;\n  }\n};","map":{"version":3,"names":["module","exports","Promise","PromiseArray","apiRejection","tryConvertToPromise","INTERNAL","debug","getDomain","_getDomain","util","require","tryCatch","ReductionPromiseArray","promises","fn","initialValue","_each","constructor$","domain","_fn","domainBind","undefined","resolve","_attachCancellationCallback","_initialValue","_currentCancellable","_eachValues","Array","_length","_promise","_captureStackTrace","_init$","inherits","prototype","_gotAccum","accum","push","_eachComplete","value","_init","_resolveEmptyArray","_resolve","shouldCopyValues","_resolveCallback","_values","_resultCancelled","sender","_cancel","_isResolved","_resultCancelled$","cancel","_iterate","values","i","length","isRejected","ctx","index","array","_then","gotAccum","completed","reduce","valueOrReason","isFulfilled","_reject","classString","promise","gotValue","call","_pushContext","ret","_boundValue","promiseCreated","_popContext","checkForgottenReturns"],"sources":["/Users/yashagrawal/Documents/Northwestern/Fall2023/CS338/InterviewPrep/node_modules/mammoth/node_modules/bluebird/js/release/reduce.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}