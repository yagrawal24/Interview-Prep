{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, tryConvertToPromise) {\n  var util = require(\"./util\");\n  var CancellationError = Promise.CancellationError;\n  var errorObj = util.errorObj;\n  function PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n  }\n  PassThroughHandlerContext.prototype.isFinallyHandler = function () {\n    return this.type === 0;\n  };\n  function FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n  }\n  FinallyHandlerCancelReaction.prototype._resultCancelled = function () {\n    checkCancel(this.finallyHandler);\n  };\n  function checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n      if (arguments.length > 1) {\n        ctx.cancelPromise._reject(reason);\n      } else {\n        ctx.cancelPromise._cancel();\n      }\n      ctx.cancelPromise = null;\n      return true;\n    }\n    return false;\n  }\n  function succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n  }\n  function fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n  }\n  function finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n    if (!this.called) {\n      this.called = true;\n      var ret = this.isFinallyHandler() ? handler.call(promise._boundValue()) : handler.call(promise._boundValue(), reasonOrValue);\n      if (ret !== undefined) {\n        promise._setReturnedNonUndefined();\n        var maybePromise = tryConvertToPromise(ret, promise);\n        if (maybePromise instanceof Promise) {\n          if (this.cancelPromise != null) {\n            if (maybePromise._isCancelled()) {\n              var reason = new CancellationError(\"late cancellation observer\");\n              promise._attachExtraTrace(reason);\n              errorObj.e = reason;\n              return errorObj;\n            } else if (maybePromise.isPending()) {\n              maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));\n            }\n          }\n          return maybePromise._then(succeed, fail, undefined, this, undefined);\n        }\n      }\n    }\n    if (promise.isRejected()) {\n      checkCancel(this);\n      errorObj.e = reasonOrValue;\n      return errorObj;\n    } else {\n      checkCancel(this);\n      return reasonOrValue;\n    }\n  }\n  Promise.prototype._passThrough = function (handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success, fail, undefined, new PassThroughHandlerContext(this, type, handler), undefined);\n  };\n  Promise.prototype.lastly = Promise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler, 0, finallyHandler, finallyHandler);\n  };\n  Promise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n  };\n  return PassThroughHandlerContext;\n};","map":{"version":3,"names":["module","exports","Promise","tryConvertToPromise","util","require","CancellationError","errorObj","PassThroughHandlerContext","promise","type","handler","called","cancelPromise","prototype","isFinallyHandler","FinallyHandlerCancelReaction","finallyHandler","_resultCancelled","checkCancel","ctx","reason","arguments","length","_reject","_cancel","succeed","call","_target","_settledValue","fail","e","reasonOrValue","ret","_boundValue","undefined","_setReturnedNonUndefined","maybePromise","_isCancelled","_attachExtraTrace","isPending","_attachCancellationCallback","_then","isRejected","_passThrough","success","then","lastly","tap"],"sources":["/Users/yashagrawal/Documents/Northwestern/Fall2023/CS338/InterviewPrep/node_modules/mammoth/node_modules/bluebird/js/release/finally.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise) {\nvar util = require(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nreturn PassThroughHandlerContext;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}