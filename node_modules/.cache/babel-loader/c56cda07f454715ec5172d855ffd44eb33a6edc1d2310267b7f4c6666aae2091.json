{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, Context) {\n  var getDomain = Promise._getDomain;\n  var async = Promise._async;\n  var Warning = require(\"./errors\").Warning;\n  var util = require(\"./util\");\n  var canAttachTrace = util.canAttachTrace;\n  var unhandledRejectionHandled;\n  var possiblyUnhandledRejection;\n  var bluebirdFramePattern = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\n  var nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\n  var parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\n  var stackFramePattern = null;\n  var formatStack = null;\n  var indentStackFrames = false;\n  var printWarning;\n  var debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 && (false || util.env(\"BLUEBIRD_DEBUG\") || util.env(\"NODE_ENV\") === \"development\"));\n  var warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 && (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n  var longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 && (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n  var wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 && (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n  Promise.prototype.suppressUnhandledRejections = function () {\n    var target = this._target();\n    target._bitField = target._bitField & ~1048576 | 524288;\n  };\n  Promise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n  };\n  Promise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\", unhandledRejectionHandled, undefined, this);\n  };\n  Promise.prototype._setReturnedNonUndefined = function () {\n    this._bitField = this._bitField | 268435456;\n  };\n  Promise.prototype._returnedNonUndefined = function () {\n    return (this._bitField & 268435456) !== 0;\n  };\n  Promise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n      var reason = this._settledValue();\n      this._setUnhandledRejectionIsNotified();\n      fireRejectionEvent(\"unhandledRejection\", possiblyUnhandledRejection, reason, this);\n    }\n  };\n  Promise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n  };\n  Promise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & ~262144;\n  };\n  Promise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n  };\n  Promise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n  };\n  Promise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & ~1048576;\n    if (this._isUnhandledRejectionNotified()) {\n      this._unsetUnhandledRejectionIsNotified();\n      this._notifyUnhandledRejectionIsHandled();\n    }\n  };\n  Promise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n  };\n  Promise.prototype._warn = function (message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n  };\n  Promise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n  };\n  Promise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n  };\n  var disableLongStackTraces = function () {};\n  Promise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n      throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n      var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n      var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n      config.longStackTraces = true;\n      disableLongStackTraces = function () {\n        if (async.haveItemsQueued() && !config.longStackTraces) {\n          throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n        }\n        Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n        Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n        Context.deactivateLongStackTraces();\n        async.enableTrampoline();\n        config.longStackTraces = false;\n      };\n      Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n      Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n      Context.activateLongStackTraces();\n      async.disableTrampolineIfNecessary();\n    }\n  };\n  Promise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n  };\n  var fireDomEvent = function () {\n    try {\n      if (typeof CustomEvent === \"function\") {\n        var event = new CustomEvent(\"CustomEvent\");\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          var domEvent = new CustomEvent(name.toLowerCase(), {\n            detail: event,\n            cancelable: true\n          });\n          return !util.global.dispatchEvent(domEvent);\n        };\n      } else if (typeof Event === \"function\") {\n        var event = new Event(\"CustomEvent\");\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          var domEvent = new Event(name.toLowerCase(), {\n            cancelable: true\n          });\n          domEvent.detail = event;\n          return !util.global.dispatchEvent(domEvent);\n        };\n      } else {\n        var event = document.createEvent(\"CustomEvent\");\n        event.initCustomEvent(\"testingtheevent\", false, true, {});\n        util.global.dispatchEvent(event);\n        return function (name, event) {\n          var domEvent = document.createEvent(\"CustomEvent\");\n          domEvent.initCustomEvent(name.toLowerCase(), false, true, event);\n          return !util.global.dispatchEvent(domEvent);\n        };\n      }\n    } catch (e) {}\n    return function () {\n      return false;\n    };\n  }();\n  var fireGlobalEvent = function () {\n    if (util.isNode) {\n      return function () {\n        return process.emit.apply(process, arguments);\n      };\n    } else {\n      if (!util.global) {\n        return function () {\n          return false;\n        };\n      }\n      return function (name) {\n        var methodName = \"on\" + name.toLowerCase();\n        var method = util.global[methodName];\n        if (!method) return false;\n        method.apply(util.global, [].slice.call(arguments, 1));\n        return true;\n      };\n    }\n  }();\n  function generatePromiseLifecycleEventObject(name, promise) {\n    return {\n      promise: promise\n    };\n  }\n  var eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function (name, promise, child) {\n      return {\n        promise: promise,\n        child: child\n      };\n    },\n    warning: function (name, warning) {\n      return {\n        warning: warning\n      };\n    },\n    unhandledRejection: function (name, reason, promise) {\n      return {\n        reason: reason,\n        promise: promise\n      };\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n  };\n  var activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n      globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n      async.throwLater(e);\n      globalEventFired = true;\n    }\n    var domEventFired = false;\n    try {\n      domEventFired = fireDomEvent(name, eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n      async.throwLater(e);\n      domEventFired = true;\n    }\n    return domEventFired || globalEventFired;\n  };\n  Promise.config = function (opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n      if (opts.longStackTraces) {\n        Promise.longStackTraces();\n      } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n        disableLongStackTraces();\n      }\n    }\n    if (\"warnings\" in opts) {\n      var warningsOption = opts.warnings;\n      config.warnings = !!warningsOption;\n      wForgottenReturn = config.warnings;\n      if (util.isObject(warningsOption)) {\n        if (\"wForgottenReturn\" in warningsOption) {\n          wForgottenReturn = !!warningsOption.wForgottenReturn;\n        }\n      }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n      if (async.haveItemsQueued()) {\n        throw new Error(\"cannot enable cancellation after promises are in use\");\n      }\n      Promise.prototype._clearCancellationData = cancellationClearCancellationData;\n      Promise.prototype._propagateFrom = cancellationPropagateFrom;\n      Promise.prototype._onCancel = cancellationOnCancel;\n      Promise.prototype._setOnCancel = cancellationSetOnCancel;\n      Promise.prototype._attachCancellationCallback = cancellationAttachCancellationCallback;\n      Promise.prototype._execute = cancellationExecute;\n      propagateFromFunction = cancellationPropagateFrom;\n      config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n      if (opts.monitoring && !config.monitoring) {\n        config.monitoring = true;\n        Promise.prototype._fireEvent = activeFireEvent;\n      } else if (!opts.monitoring && config.monitoring) {\n        config.monitoring = false;\n        Promise.prototype._fireEvent = defaultFireEvent;\n      }\n    }\n    return Promise;\n  };\n  function defaultFireEvent() {\n    return false;\n  }\n  Promise.prototype._fireEvent = defaultFireEvent;\n  Promise.prototype._execute = function (executor, resolve, reject) {\n    try {\n      executor(resolve, reject);\n    } catch (e) {\n      return e;\n    }\n  };\n  Promise.prototype._onCancel = function () {};\n  Promise.prototype._setOnCancel = function (handler) {\n    ;\n  };\n  Promise.prototype._attachCancellationCallback = function (onCancel) {\n    ;\n  };\n  Promise.prototype._captureStackTrace = function () {};\n  Promise.prototype._attachExtraTrace = function () {};\n  Promise.prototype._clearCancellationData = function () {};\n  Promise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n  };\n  function cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n      executor(resolve, reject, function (onCancel) {\n        if (typeof onCancel !== \"function\") {\n          throw new TypeError(\"onCancel must be a function, got: \" + util.toString(onCancel));\n        }\n        promise._attachCancellationCallback(onCancel);\n      });\n    } catch (e) {\n      return e;\n    }\n  }\n  function cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n      if (util.isArray(previousOnCancel)) {\n        previousOnCancel.push(onCancel);\n      } else {\n        this._setOnCancel([previousOnCancel, onCancel]);\n      }\n    } else {\n      this._setOnCancel(onCancel);\n    }\n  }\n  function cancellationOnCancel() {\n    return this._onCancelField;\n  }\n  function cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n  }\n  function cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n  }\n  function cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n      this._cancellationParent = parent;\n      var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n      if (branchesRemainingToCancel === undefined) {\n        branchesRemainingToCancel = 0;\n      }\n      parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n      this._setBoundTo(parent._boundTo);\n    }\n  }\n  function bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n      this._setBoundTo(parent._boundTo);\n    }\n  }\n  var propagateFromFunction = bindingPropagateFrom;\n  function boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n      if (ret instanceof Promise) {\n        if (ret.isFulfilled()) {\n          return ret.value();\n        } else {\n          return undefined;\n        }\n      }\n    }\n    return ret;\n  }\n  function longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n  }\n  function longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n      var trace = this._trace;\n      if (trace !== undefined) {\n        if (ignoreSelf) trace = trace._parent;\n      }\n      if (trace !== undefined) {\n        trace.attachExtraTrace(error);\n      } else if (!error.__stackCleaned__) {\n        var parsed = parseStackAndMessage(error);\n        util.notEnumerableProp(error, \"stack\", parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n        util.notEnumerableProp(error, \"__stackCleaned__\", true);\n      }\n    }\n  }\n  function checkForgottenReturns(returnValue, promiseCreated, name, promise, parent) {\n    if (returnValue === undefined && promiseCreated !== null && wForgottenReturn) {\n      if (parent !== undefined && parent._returnedNonUndefined()) return;\n      if ((promise._bitField & 65535) === 0) return;\n      if (name) name = name + \" \";\n      var handlerLine = \"\";\n      var creatorLine = \"\";\n      if (promiseCreated._trace) {\n        var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n        var stack = cleanStack(traceLines);\n        for (var i = stack.length - 1; i >= 0; --i) {\n          var line = stack[i];\n          if (!nodeFramePattern.test(line)) {\n            var lineMatches = line.match(parseLinePattern);\n            if (lineMatches) {\n              handlerLine = \"at \" + lineMatches[1] + \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n            }\n            break;\n          }\n        }\n        if (stack.length > 0) {\n          var firstUserLine = stack[0];\n          for (var i = 0; i < traceLines.length; ++i) {\n            if (traceLines[i] === firstUserLine) {\n              if (i > 0) {\n                creatorLine = \"\\n\" + traceLines[i - 1];\n              }\n              break;\n            }\n          }\n        }\n      }\n      var msg = \"a promise was created in a \" + name + \"handler \" + handlerLine + \"but was not returned from it, \" + \"see http://goo.gl/rRqMUw\" + creatorLine;\n      promise._warn(msg, true, promiseCreated);\n    }\n  }\n  function deprecated(name, replacement) {\n    var message = name + \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n  }\n  function warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n      promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n      ctx.attachExtraTrace(warning);\n    } else {\n      var parsed = parseStackAndMessage(warning);\n      warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n    if (!activeFireEvent(\"warning\", warning)) {\n      formatAndLogError(warning, \"\", true);\n    }\n  }\n  function reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n      stacks[i].push(\"From previous event:\");\n      stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n      stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n  }\n  function removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n      if (stacks[i].length === 0 || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) {\n        stacks.splice(i, 1);\n        i--;\n      }\n    }\n  }\n  function removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n      var prev = stacks[i];\n      var currentLastIndex = current.length - 1;\n      var currentLastLine = current[currentLastIndex];\n      var commonRootMeetPoint = -1;\n      for (var j = prev.length - 1; j >= 0; --j) {\n        if (prev[j] === currentLastLine) {\n          commonRootMeetPoint = j;\n          break;\n        }\n      }\n      for (var j = commonRootMeetPoint; j >= 0; --j) {\n        var line = prev[j];\n        if (current[currentLastIndex] === line) {\n          current.pop();\n          currentLastIndex--;\n        } else {\n          break;\n        }\n      }\n      current = prev;\n    }\n  }\n  function cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n      var line = stack[i];\n      var isTraceLine = \"    (No stack trace)\" === line || stackFramePattern.test(line);\n      var isInternalFrame = isTraceLine && shouldIgnore(line);\n      if (isTraceLine && !isInternalFrame) {\n        if (indentStackFrames && line.charAt(0) !== \" \") {\n          line = \"    \" + line;\n        }\n        ret.push(line);\n      }\n    }\n    return ret;\n  }\n  function stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n      var line = stack[i];\n      if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n        break;\n      }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n      stack = stack.slice(i);\n    }\n    return stack;\n  }\n  function parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0 ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n      message: message,\n      stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n  }\n  function formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n      var message;\n      if (util.isObject(error)) {\n        var stack = error.stack;\n        message = title + formatStack(stack, error);\n      } else {\n        message = title + String(error);\n      }\n      if (typeof printWarning === \"function\") {\n        printWarning(message, isSoft);\n      } else if (typeof console.log === \"function\" || typeof console.log === \"object\") {\n        console.log(message);\n      }\n    }\n  }\n  function fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n      if (typeof localHandler === \"function\") {\n        localEventFired = true;\n        if (name === \"rejectionHandled\") {\n          localHandler(promise);\n        } else {\n          localHandler(reason, promise);\n        }\n      }\n    } catch (e) {\n      async.throwLater(e);\n    }\n    if (name === \"unhandledRejection\") {\n      if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n        formatAndLogError(reason, \"Unhandled rejection \");\n      }\n    } else {\n      activeFireEvent(name, promise);\n    }\n  }\n  function formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n      str = \"[function \" + (obj.name || \"anonymous\") + \"]\";\n    } else {\n      str = obj && typeof obj.toString === \"function\" ? obj.toString() : util.toString(obj);\n      var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n      if (ruselessToString.test(str)) {\n        try {\n          var newStr = JSON.stringify(obj);\n          str = newStr;\n        } catch (e) {}\n      }\n      if (str.length === 0) {\n        str = \"(empty array)\";\n      }\n    }\n    return \"(<\" + snip(str) + \">, no stack trace)\";\n  }\n  function snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n      return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n  }\n  function longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n  }\n  var shouldIgnore = function () {\n    return false;\n  };\n  var parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n  function parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n      return {\n        fileName: matches[1],\n        line: parseInt(matches[2], 10)\n      };\n    }\n  }\n  function setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n      var result = parseLineInfo(firstStackLines[i]);\n      if (result) {\n        firstFileName = result.fileName;\n        firstIndex = result.line;\n        break;\n      }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n      var result = parseLineInfo(lastStackLines[i]);\n      if (result) {\n        lastFileName = result.fileName;\n        lastIndex = result.line;\n        break;\n      }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || firstIndex >= lastIndex) {\n      return;\n    }\n    shouldIgnore = function (line) {\n      if (bluebirdFramePattern.test(line)) return true;\n      var info = parseLineInfo(line);\n      if (info) {\n        if (info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }\n  function CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n  }\n  util.inherits(CapturedTrace, Error);\n  Context.CapturedTrace = CapturedTrace;\n  CapturedTrace.prototype.uncycle = function () {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n    for (var i = 0, node = this; node !== undefined; ++i) {\n      nodes.push(node);\n      node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n      var stack = nodes[i].stack;\n      if (stackToIndex[stack] === undefined) {\n        stackToIndex[stack] = i;\n      }\n    }\n    for (var i = 0; i < length; ++i) {\n      var currentStack = nodes[i].stack;\n      var index = stackToIndex[currentStack];\n      if (index !== undefined && index !== i) {\n        if (index > 0) {\n          nodes[index - 1]._parent = undefined;\n          nodes[index - 1]._length = 1;\n        }\n        nodes[i]._parent = undefined;\n        nodes[i]._length = 1;\n        var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n        if (index < length - 1) {\n          cycleEdgeNode._parent = nodes[index + 1];\n          cycleEdgeNode._parent.uncycle();\n          cycleEdgeNode._length = cycleEdgeNode._parent._length + 1;\n        } else {\n          cycleEdgeNode._parent = undefined;\n          cycleEdgeNode._length = 1;\n        }\n        var currentChildLength = cycleEdgeNode._length + 1;\n        for (var j = i - 2; j >= 0; --j) {\n          nodes[j]._length = currentChildLength;\n          currentChildLength++;\n        }\n        return;\n      }\n    }\n  };\n  CapturedTrace.prototype.attachExtraTrace = function (error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n    var trace = this;\n    while (trace !== undefined) {\n      stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n      trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n  };\n  var captureStackTrace = function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function (stack, error) {\n      if (typeof stack === \"string\") return stack;\n      if (error.name !== undefined && error.message !== undefined) {\n        return error.toString();\n      }\n      return formatNonError(error);\n    };\n    if (typeof Error.stackTraceLimit === \"number\" && typeof Error.captureStackTrace === \"function\") {\n      Error.stackTraceLimit += 6;\n      stackFramePattern = v8stackFramePattern;\n      formatStack = v8stackFormatter;\n      var captureStackTrace = Error.captureStackTrace;\n      shouldIgnore = function (line) {\n        return bluebirdFramePattern.test(line);\n      };\n      return function (receiver, ignoreUntil) {\n        Error.stackTraceLimit += 6;\n        captureStackTrace(receiver, ignoreUntil);\n        Error.stackTraceLimit -= 6;\n      };\n    }\n    var err = new Error();\n    if (typeof err.stack === \"string\" && err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n      stackFramePattern = /@/;\n      formatStack = v8stackFormatter;\n      indentStackFrames = true;\n      return function captureStackTrace(o) {\n        o.stack = new Error().stack;\n      };\n    }\n    var hasStackAfterThrow;\n    try {\n      throw new Error();\n    } catch (e) {\n      hasStackAfterThrow = \"stack\" in e;\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow && typeof Error.stackTraceLimit === \"number\") {\n      stackFramePattern = v8stackFramePattern;\n      formatStack = v8stackFormatter;\n      return function captureStackTrace(o) {\n        Error.stackTraceLimit += 6;\n        try {\n          throw new Error();\n        } catch (e) {\n          o.stack = e.stack;\n        }\n        Error.stackTraceLimit -= 6;\n      };\n    }\n    formatStack = function (stack, error) {\n      if (typeof stack === \"string\") return stack;\n      if ((typeof error === \"object\" || typeof error === \"function\") && error.name !== undefined && error.message !== undefined) {\n        return error.toString();\n      }\n      return formatNonError(error);\n    };\n    return null;\n  }([]);\n  if (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n      console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n      printWarning = function (message, isSoft) {\n        var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n        console.warn(color + message + \"\\u001b[0m\\n\");\n      };\n    } else if (!util.isNode && typeof new Error().stack === \"string\") {\n      printWarning = function (message, isSoft) {\n        console.warn(\"%c\" + message, isSoft ? \"color: darkorange\" : \"color: red\");\n      };\n    }\n  }\n  var config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n  };\n  if (longStackTraces) Promise.longStackTraces();\n  return {\n    longStackTraces: function () {\n      return config.longStackTraces;\n    },\n    warnings: function () {\n      return config.warnings;\n    },\n    cancellation: function () {\n      return config.cancellation;\n    },\n    monitoring: function () {\n      return config.monitoring;\n    },\n    propagateFromFunction: function () {\n      return propagateFromFunction;\n    },\n    boundValueFunction: function () {\n      return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n  };\n};","map":{"version":3,"names":["module","exports","Promise","Context","getDomain","_getDomain","async","_async","Warning","require","util","canAttachTrace","unhandledRejectionHandled","possiblyUnhandledRejection","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","printWarning","debugging","env","warnings","longStackTraces","wForgottenReturn","prototype","suppressUnhandledRejections","target","_target","_bitField","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","invokeLater","_notifyUnhandledRejection","undefined","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","_warn","message","shouldUseOwnTrace","promise","warn","onPossiblyUnhandledRejection","fn","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","haveItemsQueued","config","Error","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","_attachExtraTrace","deactivateLongStackTraces","enableTrampoline","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","activateLongStackTraces","disableTrampolineIfNecessary","hasLongStackTraces","fireDomEvent","CustomEvent","event","global","dispatchEvent","name","domEvent","toLowerCase","detail","cancelable","Event","document","createEvent","initCustomEvent","e","fireGlobalEvent","isNode","process","emit","apply","arguments","methodName","method","slice","call","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","child","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","throwLater","domEventFired","opts","Object","warningsOption","isObject","cancellation","_clearCancellationData","cancellationClearCancellationData","_propagateFrom","cancellationPropagateFrom","_onCancel","cancellationOnCancel","_setOnCancel","cancellationSetOnCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","_execute","cancellationExecute","propagateFromFunction","monitoring","_fireEvent","defaultFireEvent","executor","resolve","reject","handler","onCancel","parent","flags","TypeError","toString","_isCancellable","previousOnCancel","isArray","push","_onCancelField","_cancellationParent","branchesRemainingToCancel","_branchesRemainingToCancel","_isBound","_setBoundTo","_boundTo","bindingPropagateFrom","boundValueFunction","ret","isFulfilled","value","_trace","CapturedTrace","_peekContext","error","ignoreSelf","trace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","stack","join","checkForgottenReturns","returnValue","handlerLine","creatorLine","traceLines","split","cleanStack","i","length","line","test","lineMatches","match","firstUserLine","msg","deprecated","replacement","ctx","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","prev","currentLastIndex","currentLastLine","commonRootMeetPoint","j","pop","isTraceLine","isInternalFrame","shouldIgnore","charAt","stackFramesAsArray","replace","title","isSoft","console","String","log","localHandler","localEventFired","formatNonError","obj","str","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","captureStackTrace","parseLineInfoRegex","parseLineInfo","matches","fileName","parseInt","setBounds","firstLineError","lastLineError","firstStackLines","lastStackLines","firstIndex","lastIndex","firstFileName","lastFileName","result","info","_promisesCreated","_length","uncycle","inherits","nodes","stackToIndex","node","currentStack","index","cycleEdgeNode","currentChildLength","stackDetection","v8stackFramePattern","v8stackFormatter","stackTraceLimit","receiver","ignoreUntil","err","indexOf","o","hasStackAfterThrow","stderr","isTTY","color"],"sources":["/Users/yashagrawal/Documents/Northwestern/Fall2023/CS338/InterviewPrep/node_modules/mammoth/node_modules/bluebird/js/release/debuggability.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}